# é¹°çœ¼è¿½è¸ª (EagleTrace)

> åŸºäº eBPF å’Œè½»é‡ AI çš„æ”»å‡»é“¾å¯è§†åŒ–ç³»ç»Ÿï¼Œä¸“ä¸ºå›½äº§æ“ä½œç³»ç»Ÿ openEuler 25.09 è®¾è®¡

## ğŸ¯ é¡¹ç›®ç®€ä»‹

**é¹°çœ¼è¿½è¸ª (EagleTrace)** æ˜¯ä¸€ä¸ªåˆ›æ–°çš„ç½‘ç»œå®‰å…¨ç›‘æ§ä¸åˆ†æå¹³å°ï¼Œåˆ©ç”¨ eBPF æŠ€æœ¯å®ç°å†…æ ¸çº§ç³»ç»Ÿè°ƒç”¨æ•è·ï¼Œç»“åˆè½»é‡çº§äººå·¥æ™ºèƒ½ç®—æ³•ï¼Œä¸ºå®‰å…¨åˆ†æå¸ˆæä¾›å®æ—¶çš„æ”»å‡»é“¾å¯è§†åŒ–å’Œå¼‚å¸¸æ£€æµ‹èƒ½åŠ›ã€‚

### æ ¸å¿ƒç‰¹æ€§

- ğŸ” **å†…æ ¸çº§ç›‘æ§**: åŸºäº eBPF æŠ€æœ¯ï¼Œæ— ä¾µå…¥å¼æ•è·ç³»ç»Ÿè°ƒç”¨å’Œå†…æ ¸äº‹ä»¶
- ğŸ§  **æ™ºèƒ½åˆ†æ**: é›†æˆè½»é‡çº§ AI æ¨¡å‹ï¼Œè‡ªåŠ¨è¯†åˆ«å¼‚å¸¸è¡Œä¸ºæ¨¡å¼
- ğŸ“Š **å¯è§†åŒ–å›¾è°±**: å®æ—¶æ„å»ºå’Œå±•ç¤ºæ”»å‡»é“¾å…³ç³»å›¾è°±
- ğŸ¨ **ç›´è§‚ç•Œé¢**: ç°ä»£åŒ– Web ç•Œé¢ï¼Œæ”¯æŒäº¤äº’å¼æ•°æ®æ¢ç´¢
- ğŸš€ **é«˜æ€§èƒ½**: é’ˆå¯¹å›½äº§æ“ä½œç³»ç»Ÿä¼˜åŒ–ï¼Œä½å»¶è¿Ÿé«˜åå
- ğŸ›¡ï¸ **å®‰å…¨åŠ å›º**: éµå¾ªæœ€ä½³å®‰å…¨å®è·µï¼Œæ”¯æŒæƒé™æœ€å°åŒ–éƒ¨ç½²

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   eBPF å†…æ ¸æ¨¡å—  â”‚â”€â”€â”€â–¶â”‚   æ•°æ®é‡‡é›†å±‚     â”‚â”€â”€â”€â–¶â”‚   è§„åˆ™å¼•æ“       â”‚
â”‚  (syscallæ•è·)  â”‚    â”‚  (Go/Python)   â”‚    â”‚  (å®æ—¶åŒ¹é…)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚                       â”‚
                                â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯å¯è§†åŒ–     â”‚â—€â”€â”€â”€â”‚   æ•°æ®å­˜å‚¨å±‚     â”‚â—€â”€â”€â”€â”‚   AI åˆ†æå¼•æ“    â”‚
â”‚  (D3.js/React) â”‚    â”‚   (SQLite)     â”‚    â”‚ (å¼‚å¸¸æ£€æµ‹/è¯„åˆ†)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç³»ç»Ÿè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: openEuler 25.09 (æ¨è) æˆ–å…¶ä»–æ”¯æŒ eBPF çš„ Linux å‘è¡Œç‰ˆ
- **å†…æ ¸ç‰ˆæœ¬**: >= 4.18 (æ”¯æŒ eBPF CO-RE)
- **æƒé™**: root æˆ–å…·æœ‰ CAP_BPF èƒ½åŠ›
- **å†…å­˜**: >= 4GB RAM
- **å­˜å‚¨**: >= 5GB å¯ç”¨ç©ºé—´

### ä¸€é”®å®‰è£…

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/2577552541/eTracee.git
cd eTracee

# æ‰§è¡Œè‡ªåŠ¨åŒ–å®‰è£…è„šæœ¬
sudo bash setup-ebpf.sh
```

å®‰è£…è„šæœ¬å°†è‡ªåŠ¨å®Œæˆï¼š
- âœ… ç³»ç»Ÿä¾èµ–æ£€æŸ¥å’Œå®‰è£… (clang, llvm, bpftool, bpftrace ç­‰)
- âœ… å†…æ ¸ eBPF æ”¯æŒéªŒè¯
- âœ… å¼€å‘ç¯å¢ƒé…ç½®
- âœ… ç¤ºä¾‹ç¨‹åºéƒ¨ç½²å’Œæµ‹è¯•

### éªŒè¯å®‰è£…

å®‰è£…å®Œæˆåï¼Œæ£€æŸ¥ `test/test_result.log` æ–‡ä»¶ç¡®è®¤ç³»ç»Ÿæ­£å¸¸å·¥ä½œï¼š

```bash
# æŸ¥çœ‹æµ‹è¯•ç»“æœ
cat test/test_result.log

# æ‰‹åŠ¨è¿è¡Œæµ‹è¯•
sudo bpftrace test/execve_trace.bt &
bash test/trigger_exec.sh
```

é¢„æœŸè¾“å‡ºç¤ºä¾‹ï¼š
```
bash -> /bin/ls
bash -> /bin/true
bash -> /usr/bin/sleep
...
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
EagleTrace/
â”œâ”€â”€ setup-ebpf.sh          # ä¸€é”®å®‰è£…è„šæœ¬
â”œâ”€â”€ setup-ebpf.log         # å®‰è£…æ—¥å¿—
â”œâ”€â”€ test/                  # æµ‹è¯•å’Œç¤ºä¾‹
â”‚   â”œâ”€â”€ execve_trace.bt    # bpftrace ç³»ç»Ÿè°ƒç”¨è·Ÿè¸ªè„šæœ¬
â”‚   â”œâ”€â”€ ingest_realtime.py # Python å®æ—¶æ•°æ®é‡‡é›†å™¨
â”‚   â”œâ”€â”€ trigger_exec.sh    # æµ‹è¯•äº‹ä»¶è§¦å‘å™¨
â”‚   â””â”€â”€ test_result.log    # æµ‹è¯•æ‰§è¡Œæ—¥å¿—
â”œâ”€â”€ src/                   # æºä»£ç  (å¼€å‘ä¸­)
â”‚   â”œâ”€â”€ ebpf/             # eBPF å†…æ ¸ç¨‹åº
â”‚   â”œâ”€â”€ collector/        # ç”¨æˆ·æ€æ•°æ®æ”¶é›†å™¨
â”‚   â”œâ”€â”€ engine/           # è§„åˆ™å¼•æ“å’Œ AI æ¨¡å—
â”‚   â”œâ”€â”€ api/              # REST API æœåŠ¡
â”‚   â””â”€â”€ frontend/         # Web å‰ç«¯ç•Œé¢
â””â”€â”€ docs/                 # æ–‡æ¡£ (å¼€å‘ä¸­)
```

## ğŸ› ï¸ å¼€å‘è®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µ (å‘¨ 1-4): åŸºç¡€è®¾æ–½
- [x] ç¯å¢ƒå‡†å¤‡å’Œ eBPF æœ€ç®€å¯è¡Œé“¾è·¯
- [ ] ç³»ç»Ÿè°ƒç”¨æ•è·å’Œæ•°æ®å¯¼å‡º
- [ ] è¿‡æ»¤è§„åˆ™å’ŒèšåˆåŠŸèƒ½
- [ ] è½»é‡çº§è§„åˆ™å¼•æ“

### ç¬¬äºŒé˜¶æ®µ (å‘¨ 5-8): æ•°æ®å¤„ç†
- [ ] äº‹ä»¶å­˜å‚¨ä¸ç´¢å¼•ç³»ç»Ÿ
- [ ] åç«¯æ¶æ„å’Œ WebSocket æ¥å£
- [ ] å…³ç³»å›¾è°±æ¨¡å‹æ„å»º
- [ ] å‰ç«¯å¯è§†åŒ– PoC

### ç¬¬ä¸‰é˜¶æ®µ (å‘¨ 9-11): å¯è§†åŒ–
- [ ] å›¾è°±äº¤äº’å’Œæ—¶é—´å›æ”¾
- [ ] è½»é‡ AI ç‰¹å¾å·¥ç¨‹
- [ ] AI ä¸è§„åˆ™å¼•æ“è”åŠ¨

### ç¬¬å››é˜¶æ®µ (å‘¨ 12-14): å®Œå–„
- [ ] è‡ªåŠ¨åŒ–æŠ¥å‘Šç”Ÿæˆ
- [ ] æ€§èƒ½ä¼˜åŒ–å’Œå®‰å…¨åŠ å›º
- [ ] æ–‡æ¡£å®Œå–„å’Œæœ€ç»ˆäº¤ä»˜

## ğŸ”§ ä½¿ç”¨æŒ‡å—

### åŸºç¡€ç›‘æ§

```bash
# å¯åŠ¨å®æ—¶ç³»ç»Ÿè°ƒç”¨ç›‘æ§
sudo python3 test/ingest_realtime.py

# åœ¨å¦ä¸€ä¸ªç»ˆç«¯è§¦å‘æµ‹è¯•äº‹ä»¶
bash test/trigger_exec.sh
```

### è‡ªå®šä¹‰è§„åˆ™

ç¼–è¾‘ bpftrace è„šæœ¬ä»¥ç›‘æ§ç‰¹å®šäº‹ä»¶ï¼š

```bash
# ç›‘æ§æ–‡ä»¶æ‰“å¼€æ“ä½œ
sudo bpftrace -e '
tracepoint:syscalls:sys_enter_openat {
    printf("%s opened: %s\n", comm, str(args->filename));
}'
```

### é«˜çº§é…ç½®

è¯¦ç»†é…ç½®é€‰é¡¹è¯·å‚è€ƒ [é…ç½®æ–‡æ¡£](docs/configuration.md) (å¼€å‘ä¸­)

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿ç¤¾åŒºè´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ™ è‡´è°¢

- [eBPF ç¤¾åŒº](https://ebpf.io/) - æä¾›å¼ºå¤§çš„å†…æ ¸ç¼–ç¨‹æ¡†æ¶
- [bpftrace é¡¹ç›®](https://github.com/iovisor/bpftrace) - é«˜çº§ eBPF è·Ÿè¸ªè¯­è¨€
- [openEuler ç¤¾åŒº](https://www.openeuler.org/) - ä¼˜ç§€çš„å›½äº§æ“ä½œç³»ç»Ÿå¹³å°

## ğŸ“ è”ç³»æˆ‘ä»¬

- é¡¹ç›®ä¸»é¡µ: https://github.com/2577552541/eTracee.git
- é—®é¢˜åé¦ˆ: https://github.com/2577552541/eTracee.git/issues
- é‚®ç®±: security@your-org.com

---

**é¹°çœ¼è¿½è¸ª (EagleTrace)** - è®©å®‰å…¨å¨èƒæ— æ‰€éå½¢ ğŸ¦…